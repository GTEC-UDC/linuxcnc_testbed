<!doctype html>
<html class="no-js" lang="en" data-content_root="../../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../../genindex.html" /><link rel="search" title="Search" href="../../search.html" /><link rel="next" title="GNU Free Documentation License" href="../../fdl-1.3.html" /><link rel="prev" title="3.7. Basic LinuxCNC Usage" href="07_linuxcnc_basic_usage.html" />

    <link rel="shortcut icon" href="../../_static/favicon.png"/><!-- Generated with Sphinx 8.2.3 and Furo 2024.08.06 -->
        <title>3.8. LinuxCNC Configuration - LinuxCNC Motor Control Testbed</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?v=302659d7" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css?v=4e80d089" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/tables.css?v=2e456b7d" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --font-stack: IBM Plex Sans, Helvetica, sans-serif;
  --font-stack--monospace: IBM Plex Mono, monospace;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">LinuxCNC Motor Control Testbed</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../../_static/logo_udc_gtec_citic.svg" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">LinuxCNC Motor Control Testbed</span>
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../01_introduction/introduction.html">1. Introduction</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../02_igus_dryve_d1/00_index.html">2. igus® dryve D1 Controllers</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of 2. igus® dryve D1 Controllers</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../02_igus_dryve_d1/01_start_page.html">2.1. “Start” Page</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02_igus_dryve_d1/02_motor_page.html">2.2. “Motor” Page</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02_igus_dryve_d1/03_axis_page.html">2.3. “Axis” Page</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02_igus_dryve_d1/04_communication_page.html">2.4. “Communication” Page</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02_igus_dryve_d1/05_inputs_ouputs_page.html">2.5. “Inputs/Outputs” Page</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02_igus_dryve_d1/06_drive_profile_page.html">2.6. “Drive Profile” Page</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02_igus_dryve_d1/07_oscilloscope_page.html">2.7. “Oscilloscope” Page</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="00_index.html">3. LinuxCNC</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of 3. LinuxCNC</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="01_installation.html">3.1. Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="02_latency_analysis.html">3.2. System Latency Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="03_latency_tuning.html">3.3. System Latency Tuning</a></li>
<li class="toctree-l2"><a class="reference internal" href="04_mesa_7i96s_configuration.html">3.4. MESA 7I96S Board Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="05_mesa_7i77_configuration.html">3.5. MESA 7I77 Board Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="06_linuxcnc_introduction.html">3.6. Introduction to LinuxCNC</a></li>
<li class="toctree-l2"><a class="reference internal" href="07_linuxcnc_basic_usage.html">3.7. Basic LinuxCNC Usage</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">3.8. LinuxCNC Configuration</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../fdl-1.3.html">GNU Free Documentation License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bibliography.html">Bibliography</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../../_sources/doc/03_linuxcnc/08_linuxcnc_configuration.md.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section class="tex2jax_ignore mathjax_ignore" id="linuxcnc-configuration">
<span id="sec-linuxcnc-configuration"></span><h1><span class="section-number">3.8. </span>LinuxCNC Configuration<a class="headerlink" href="#linuxcnc-configuration" title="Link to this heading">¶</a></h1>
<p>As noted in <a class="reference internal" href="06_linuxcnc_introduction.html#sec-linuxcnc-intro-config"><span class="std std-numref">Section 3.6.2</span></a>, a LinuxCNC configuration comprises several files, requiring at least one INI file and one <abbr title="Hardware Abstraction Layer">HAL</abbr> file. The following sections detail the configuration of both file types, using the <code class="docutils literal notranslate"><span class="pre">mesa_7i96s_7i77_xy</span></code> configuration as an example.</p>
<section id="ini-configuration">
<span id="sec-linuxcnc-configuration-ini"></span><h2><span class="section-number">3.8.1. </span>INI Configuration<a class="headerlink" href="#ini-configuration" title="Link to this heading">¶</a></h2>
<section id="ini-configuration-file-format">
<h3><span class="section-number">3.8.1.1. </span>.ini Configuration File Format<a class="headerlink" href="#ini-configuration-file-format" title="Link to this heading">¶</a></h3>
<p>An <code class="docutils literal notranslate"><span class="pre">.ini</span></code> file is a plain text file used for configuring applications and programs. It has a simple structure consisting of sections and key-value pairs. The basic syntax of an <code class="docutils literal notranslate"><span class="pre">.ini</span></code> file is as follows:</p>
<ul>
<li><p><strong>Sections</strong>: Sections serve to organize keys and values. Each section begins with its name enclosed in square brackets, followed by zero or more key-value pairs belonging to that section. The syntax for a section is:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[section_name]</span>
</pre></div>
</div>
</li>
<li><p><strong>Keys and Values</strong>: Within each section, keys and their corresponding values can be defined. Keys are identifiers used to access associated values. The syntax for a key-value pair is:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="na">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">value</span>
</pre></div>
</div>
<p>Keys can contain letters and underscores (<code class="docutils literal notranslate"><span class="pre">_</span></code>). Values can be text strings, integers, or floating-point numbers.</p>
</li>
<li><p><strong>Comments</strong>: Comments begin with a semicolon (<code class="docutils literal notranslate"><span class="pre">;</span></code>) or a hash symbol (<code class="docutils literal notranslate"><span class="pre">#</span></code>). For example:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1">; This is a comment</span>
<span class="c1"># This is also a comment</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="example-mesa-7i96s-7i77-xy-ini-configuration-file">
<h3><span class="section-number">3.8.1.2. </span>Example: <code class="docutils literal notranslate"><span class="pre">mesa_7i96s_7i77_xy.ini</span></code> Configuration File<a class="headerlink" href="#example-mesa-7i96s-7i77-xy-ini-configuration-file" title="Link to this heading">¶</a></h3>
<p>Below are the different sections of the <code class="docutils literal notranslate"><span class="pre">mesa_7i96s_7i77_xy.ini</span></code> configuration file, with comments explaining the purpose of each parameter. Note that not all available parameters are specified in some sections. For a complete list of parameters and their documentation, consult the LinuxCNC user manual <span id="id1">[<a class="reference internal" href="../../bibliography.html#id14" title="LinuxCNC Documentation. 2023. URL: https://linuxcnc.org/docs/.">lin23</a>]</span>.</p>
<ul>
<li><p><strong>EMC Section</strong>: General configuration.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="k">[EMC]</span>
<span class="linenos"> 2</span><span class="c1"># General configuration</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="c1"># Machine name, usually displayed in the interface window.</span>
<span class="linenos"> 5</span><span class="na">MACHINE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">mesa_7i96s</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="c1"># Debug flags, 0 will not print debug messages.</span>
<span class="linenos"> 8</span><span class="na">DEBUG</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span><span class="c1"># Configuration version, for LinuxCNC 2.9 it should be 1.1.</span>
<span class="linenos">11</span><span class="na">VERSION</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1.1</span>
</pre></div>
</div>
</li>
<li><p><strong>DISPLAY Section</strong>: User interface configuration. The available options may depend on the specific user interface used. In this case, we are using the AXIS user interface.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="linenos">14</span><span class="k">[DISPLAY]</span>
<span class="linenos">15</span><span class="c1"># Graphic interface configuration</span>
<span class="linenos">16</span>
<span class="linenos">17</span><span class="c1"># Type of graphic interface to use.</span>
<span class="linenos">18</span><span class="na">DISPLAY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">axis</span>
<span class="linenos">19</span>
<span class="linenos">20</span><span class="c1"># Coordinate system: RELATIVE or MACHINE.</span>
<span class="linenos">21</span><span class="na">POSITION_OFFSET</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">MACHINE</span>
<span class="linenos">22</span>
<span class="linenos">23</span><span class="c1"># Coordinates to display: COMMANDED or ACTUAL.</span>
<span class="linenos">24</span><span class="na">POSITION_FEEDBACK</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">ACTUAL</span>
<span class="linenos">25</span>
<span class="linenos">26</span><span class="c1"># Maximum &quot;feed override&quot;. A &quot;feed override&quot; of 2 means</span>
<span class="linenos">27</span><span class="c1"># 200% of the programmed &quot;feed rate&quot;.</span>
<span class="linenos">28</span><span class="na">MAX_FEED_OVERRIDE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">2.000000</span>
<span class="linenos">29</span>
<span class="linenos">30</span><span class="c1"># Image to display on the splash screen.</span>
<span class="linenos">31</span><span class="na">INTRO_GRAPHIC</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">linuxcnc.gif</span>
<span class="linenos">32</span>
<span class="linenos">33</span><span class="c1"># Maximum time in seconds for the splash screen.</span>
<span class="linenos">34</span><span class="na">INTRO_TIME</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">5</span>
<span class="linenos">35</span>
<span class="linenos">36</span><span class="c1"># Default directory for G-code programs.</span>
<span class="linenos">37</span><span class="na">PROGRAM_PREFIX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">/home/gtec/linuxcnc/nc_files</span>
<span class="linenos">38</span>
<span class="linenos">39</span><span class="c1"># Increments to move the robot with manual control.</span>
<span class="linenos">40</span><span class="na">INCREMENTS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">5mm 1mm .5mm .1mm .05mm .01mm .005mm</span>
<span class="linenos">41</span>
<span class="linenos">42</span><span class="c1"># The coordinate value to be displayed: COMMANDED or ACTUAL</span>
<span class="linenos">43</span><span class="na">POSITION_FEEDBACK</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">ACTUAL</span>
<span class="linenos">44</span>
<span class="linenos">45</span><span class="c1"># Default linear velocity with manual control.</span>
<span class="linenos">46</span><span class="na">DEFAULT_LINEAR_VELOCITY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1.000000</span>
<span class="linenos">47</span>
<span class="linenos">48</span><span class="c1"># Maximum allowed linear velocity with manual control.</span>
<span class="linenos">49</span><span class="na">MAX_LINEAR_VELOCITY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">10.000000</span>
<span class="linenos">50</span>
<span class="linenos">51</span><span class="c1"># Minimum allowed linear velocity with manual control.</span>
<span class="linenos">52</span><span class="na">MIN_LINEAR_VELOCITY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0.000000</span>
<span class="linenos">53</span>
<span class="linenos">54</span><span class="c1"># Text editor to use when clicking File -&gt; Edit.</span>
<span class="linenos">55</span><span class="na">EDITOR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">mousepad</span>
<span class="linenos">56</span>
<span class="linenos">57</span><span class="c1"># Geometry of the 3D view in the preview window.</span>
<span class="linenos">58</span><span class="na">GEOMETRY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">XY</span>
<span class="linenos">59</span>
<span class="linenos">60</span><span class="c1"># Refresh time in milliseconds.</span>
<span class="linenos">61</span><span class="na">CYCLE_TIME</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">100</span>
<span class="linenos">62</span>
<span class="linenos">63</span><span class="c1"># File to open when starting LinuxCNC (optional).</span>
<span class="linenos">64</span><span class="na">OPEN_FILE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span>
</pre></div>
</div>
</li>
<li><p><strong>TASK Section</strong>: LinuxCNC task controller configuration. The task controller is responsible for communicating with the user interface, the motion planner, and the G-code interpreter. Currently, <code class="docutils literal notranslate"><span class="pre">milltask</span></code> is the only task controller available. For more information, consult the LinuxCNC user manual <span id="id2">[<a class="reference internal" href="../../bibliography.html#id14" title="LinuxCNC Documentation. 2023. URL: https://linuxcnc.org/docs/.">lin23</a>]</span> and the <code class="docutils literal notranslate"><span class="pre">milltask</span></code> man page, also available at <a class="reference external" href="http://linuxcnc.org/docs/devel/html/man/man1/milltask.1.html">http://linuxcnc.org/docs/devel/html/man/man1/milltask.1.html</a>.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="linenos">67</span><span class="k">[TASK]</span>
<span class="linenos">68</span><span class="c1"># Task controller configuration</span>
<span class="linenos">69</span>
<span class="linenos">70</span><span class="c1"># Task controller module, milltask.</span>
<span class="linenos">71</span><span class="na">TASK</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">milltask</span>
<span class="linenos">72</span>
<span class="linenos">73</span><span class="c1"># Execution period of milltask.</span>
<span class="linenos">74</span><span class="na">CYCLE_TIME</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0.010</span>
</pre></div>
</div>
</li>
<li><p><strong>RS274NGC Section</strong>: RS274NGC (G-code) interpreter configuration.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="linenos">77</span><span class="k">[RS274NGC]</span>
<span class="linenos">78</span><span class="c1"># RS274NGC interpreter configuration</span>
<span class="linenos">79</span>
<span class="linenos">80</span><span class="c1"># Interpreter variable file.</span>
<span class="linenos">81</span><span class="na">PARAMETER_FILE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">linuxcnc.var</span>
<span class="linenos">82</span>
<span class="linenos">83</span><span class="c1"># Startup codes for the interpreter.</span>
<span class="linenos">84</span><span class="na">RS274NGC_STARTUP_CODE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">G21 G40 G90 G94 G97 G64 P0.025</span>
</pre></div>
</div>
</li>
<li><p><strong>EMCMOT Section</strong>: Motion controller configuration. The <code class="docutils literal notranslate"><span class="pre">EMCMOT</span></code> and <code class="docutils literal notranslate"><span class="pre">SERVO_PERIOD</span></code> parameters are not directly used by LinuxCNC but are used to configure the motion control module in the <abbr title="Hardware Abstraction Layer">HAL</abbr> file (see <a class="reference internal" href="#sec-linuxcnc-configuration-hal"><span class="std std-numref">Section 3.8.2</span></a>).</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 87</span><span class="k">[EMCMOT]</span>
<span class="linenos"> 88</span><span class="c1"># Motion controller configuration</span>
<span class="linenos"> 89</span>
<span class="linenos"> 90</span><span class="c1"># Motion controller module, motmod.</span>
<span class="linenos"> 91</span><span class="c1"># Not used by LinuxCNC directly, used in the HAL file.</span>
<span class="linenos"> 92</span><span class="na">EMCMOT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">motmod</span>
<span class="linenos"> 93</span>
<span class="linenos"> 94</span><span class="c1"># Number of seconds to wait for the motion module to</span>
<span class="linenos"> 95</span><span class="c1"># confirm receipt of messages from the task module.</span>
<span class="linenos"> 96</span><span class="na">COMM_TIMEOUT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1.0</span>
<span class="linenos"> 97</span>
<span class="linenos"> 98</span><span class="c1"># &quot;servo&quot; thread period</span>
<span class="linenos"> 99</span><span class="c1"># Not used by LinuxCNC directly, used in the HAL file.</span>
<span class="linenos">100</span><span class="na">SERVO_PERIOD</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1000000</span>
</pre></div>
</div>
</li>
<li><p><strong><abbr title="Hardware Abstraction Layer">HAL</abbr> Section</strong>: <abbr title="Hardware Abstraction Layer">HAL</abbr> configuration.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="linenos">103</span><span class="k">[HAL]</span>
<span class="linenos">104</span><span class="c1"># Hardware Abstraction Layer (HAL) configuration</span>
<span class="linenos">105</span>
<span class="linenos">106</span><span class="c1"># Add the HAL user interface pins.</span>
<span class="linenos">107</span><span class="na">HALUI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">halui</span>
<span class="linenos">108</span>
<span class="linenos">109</span><span class="c1"># HAL file to execute when starting LinuxCNC.</span>
<span class="linenos">110</span><span class="c1"># Can be specified multiple times.</span>
<span class="linenos">111</span><span class="na">HALFILE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">mesa_7i96s_7i77_xy.hal</span>
<span class="linenos">112</span>
<span class="linenos">113</span><span class="c1"># HAL file to execute after loading the graphical interface.</span>
<span class="linenos">114</span><span class="na">POSTGUI_HALFILE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">postgui.hal</span>
<span class="linenos">115</span>
<span class="linenos">116</span><span class="c1"># HAL file to execute when closing LinuxCNC.</span>
<span class="linenos">117</span><span class="na">SHUTDOWN</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">shutdown.hal</span>
</pre></div>
</div>
</li>
<li><p><strong>HALUI Section</strong>: HALUI (HAL-based user interface) configuration. The only available option is <code class="docutils literal notranslate"><span class="pre">MDI_COMMAND</span></code>, which allows MDI commands to be executed via <abbr title="Hardware Abstraction Layer">HAL</abbr> signals. In our case, this section is left empty.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="linenos">120</span><span class="k">[HALUI]</span>
<span class="linenos">121</span><span class="c1"># HAL User Interface</span>
<span class="linenos">122</span>
<span class="linenos">123</span><span class="c1"># MDI Command. Can be specified multiple times.</span>
<span class="linenos">124</span><span class="c1"># To execute it use the halui.mdi-command-NN pin,</span>
<span class="linenos">125</span><span class="c1"># where NN is the command number.</span>
<span class="linenos">126</span><span class="c1"># MDI_COMMAND = G1 X0 Y0 Z0</span>
</pre></div>
</div>
</li>
<li><p><strong>KINS Section</strong>: Kinematics configuration.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="linenos">129</span><span class="k">[KINS]</span>
<span class="linenos">130</span><span class="c1"># Kinematics</span>
<span class="linenos">131</span>
<span class="linenos">132</span><span class="c1"># Number of joints (motors).</span>
<span class="linenos">133</span><span class="na">JOINTS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">2</span>
<span class="linenos">134</span>
<span class="linenos">135</span><span class="c1"># Kinematics module</span>
<span class="linenos">136</span><span class="c1"># Not used by LinuxCNC directly, used in the HAL file.</span>
<span class="linenos">137</span><span class="na">KINEMATICS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">trivkins coordinates=XY</span>
</pre></div>
</div>
</li>
<li><p><strong>APPLICATIONS Section</strong>: LinuxCNC allows applications to be launched at startup. These applications must be specified within the <code class="docutils literal notranslate"><span class="pre">APPLICATIONS</span></code> section using the <code class="docutils literal notranslate"><span class="pre">APP</span></code> option, which can be used multiple times. Applications will be launched either at the beginning, before the graphical interface starts, or after a delay specified by the <code class="docutils literal notranslate"><span class="pre">DELAY</span></code> option.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="linenos">140</span><span class="k">[APPLICATIONS]</span>
<span class="linenos">141</span><span class="c1"># Additional applications</span>
<span class="linenos">142</span>
<span class="linenos">143</span><span class="c1"># Application to execute. Can be specified multiple times.</span>
<span class="linenos">144</span><span class="na">APP</span><span class="o">=</span><span class="s">halscope 50000</span>
</pre></div>
</div>
</li>
<li><p><strong>TRAJ Section</strong>: Trajectory planner configuration.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="linenos">147</span><span class="k">[TRAJ]</span>
<span class="linenos">148</span><span class="c1"># Trajectory planner configuration</span>
<span class="linenos">149</span>
<span class="linenos">150</span><span class="c1"># Controlled axes. Possible values: X, Y, Z, A, B, C, U, V, W.</span>
<span class="linenos">151</span><span class="c1"># An axis can be specified more than once, e.g., XXYZ.</span>
<span class="linenos">152</span><span class="na">COORDINATES</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="s">XY</span>
<span class="linenos">153</span>
<span class="linenos">154</span><span class="c1"># Units for linear axes.</span>
<span class="linenos">155</span><span class="na">LINEAR_UNITS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">mm</span>
<span class="linenos">156</span>
<span class="linenos">157</span><span class="c1"># Units for rotary axes.</span>
<span class="linenos">158</span><span class="na">ANGULAR_UNITS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">degree</span>
<span class="linenos">159</span>
<span class="linenos">160</span><span class="c1"># Maximum linear velocity, in units per second.</span>
<span class="linenos">161</span><span class="na">MAX_LINEAR_VELOCITY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">12.00</span>
<span class="linenos">162</span>
<span class="linenos">163</span><span class="c1"># Maximum linear acceleration, in units per second^2.</span>
<span class="linenos">164</span><span class="na">MAX_LINEAR_ACCELERATION</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">20.0</span>
</pre></div>
</div>
</li>
<li><p><strong>EMCIO Section</strong>: Input/output controller configuration. This controls input/output tasks such as coolant, tool changes, and emergency stops.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="linenos">167</span><span class="k">[EMCIO]</span>
<span class="linenos">168</span><span class="c1"># Input/Output (I/O) controller configuration</span>
<span class="linenos">169</span>
<span class="linenos">170</span><span class="c1"># Input/output controller module.</span>
<span class="linenos">171</span><span class="na">EMCIO</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">io</span>
<span class="linenos">172</span>
<span class="linenos">173</span><span class="c1"># Period at which EMCIO will be executed.</span>
<span class="linenos">174</span><span class="na">CYCLE_TIME</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0.100</span>
</pre></div>
</div>
</li>
<li><p><strong>AXIS_&lt;i&gt; Section</strong>: Configuration for axis <em>&lt;i&gt;</em>. Possible values for <em>&lt;i&gt;</em> include <code class="docutils literal notranslate"><span class="pre">X</span></code>, <code class="docutils literal notranslate"><span class="pre">Y</span></code>, <code class="docutils literal notranslate"><span class="pre">Z</span></code>, <code class="docutils literal notranslate"><span class="pre">A</span></code>, <code class="docutils literal notranslate"><span class="pre">B</span></code>, <code class="docutils literal notranslate"><span class="pre">C</span></code>, <code class="docutils literal notranslate"><span class="pre">U</span></code>, <code class="docutils literal notranslate"><span class="pre">V</span></code>, and <code class="docutils literal notranslate"><span class="pre">W</span></code>. An example of the X-axis configuration is provided below; the Y-axis configuration is similar.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>When configuring the robot’s limits (<code class="docutils literal notranslate"><span class="pre">MIN_LIMIT</span></code> and <code class="docutils literal notranslate"><span class="pre">MAX_LIMIT</span></code> parameters), it is advisable to leave some margin beyond the desired workspace. If the robot is commanded to position itself at one of the limits, it can easily exceed that limit slightly. For example, if you want your robot to operate on the X-axis between X = 0 and X = 200, you could configure <code class="docutils literal notranslate"><span class="pre">MIN_LIMIT</span> <span class="pre">=</span> <span class="pre">-5</span></code> and <code class="docutils literal notranslate"><span class="pre">MAX_LIMIT</span> <span class="pre">=</span> <span class="pre">205</span></code>.</p>
</div>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="linenos">177</span><span class="k">[AXIS_X]</span>
<span class="linenos">178</span><span class="c1"># X axis configuration</span>
<span class="linenos">179</span>
<span class="linenos">180</span><span class="c1"># Maximum axis velocity, in units per second.</span>
<span class="linenos">181</span><span class="na">MAX_VELOCITY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">12.0</span>
<span class="linenos">182</span>
<span class="linenos">183</span><span class="c1"># Maximum axis acceleration, in units per second^2.</span>
<span class="linenos">184</span><span class="na">MAX_ACCELERATION</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">20.0</span>
<span class="linenos">185</span>
<span class="linenos">186</span><span class="c1"># Minimum limit for the axis, in machine units.</span>
<span class="linenos">187</span><span class="na">MIN_LIMIT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">-5</span>
<span class="linenos">188</span>
<span class="linenos">189</span><span class="c1"># Maximum limit for the axis, in machine units.</span>
<span class="linenos">190</span><span class="na">MAX_LIMIT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">205.0</span>
</pre></div>
</div>
</li>
<li><p><strong>JOINT_&lt;n&gt; Section</strong>: Configuration for joint (motor) <em>&lt;n&gt;</em>, where <em>&lt;n&gt;</em> is the joint number, ranging from 0 to (<em>&lt;num_joints&gt;</em> <span class="math notranslate nohighlight">\(-\)</span> 1). The value of <em>&lt;num_joints&gt;</em> is set in the <code class="docutils literal notranslate"><span class="pre">JOINTS</span></code> option of the <code class="docutils literal notranslate"><span class="pre">KINS</span></code> section.</p>
<p>For machines with Cartesian geometries, such as gantry robots, LinuxCNC includes the <code class="docutils literal notranslate"><span class="pre">trivkins</span></code> kinematics module. With this module, by default, there is a 1:1 correspondence between the axis coordinate letter and the joint number, i.e., JOINT_0 = X, JOINT_1 = Y, …, JOINT_8 = W.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">trivkins</span></code> module accepts the <code class="docutils literal notranslate"><span class="pre">coordinates</span></code> parameter to specify the association of axis coordinate letters with the joint number. For example, with the parameter <code class="docutils literal notranslate"><span class="pre">coordinates=XZ</span></code>, JOINT_0 will be assigned to X and JOINT_1 to Z. In this parameter, the same axis letter can be specified multiple times, allowing multiple joints to be assigned to the same axis. In this case, it is also necessary to use the <code class="docutils literal notranslate"><span class="pre">kinstype=B</span></code> parameter. For instance, with the parameters <code class="docutils literal notranslate"><span class="pre">coordinates=XX</span></code> and <code class="docutils literal notranslate"><span class="pre">kinstype=B</span></code>, both JOINT_0 and JOINT_1 will be assigned to X.</p>
<p>For more information about the <code class="docutils literal notranslate"><span class="pre">trivkins</span></code> kinematics module, consult the <code class="docutils literal notranslate"><span class="pre">kins</span></code> man page, also available at <a class="reference external" href="http://linuxcnc.org/docs/devel/html/man/man9/kins.9.html">http://linuxcnc.org/docs/devel/html/man/man9/kins.9.html</a>.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Both the joint and axis configurations include <code class="docutils literal notranslate"><span class="pre">MAX_VELOCITY</span></code>, <code class="docutils literal notranslate"><span class="pre">MAX_ACCELERATION</span></code>, <code class="docutils literal notranslate"><span class="pre">MIN_LIMIT</span></code>, and <code class="docutils literal notranslate"><span class="pre">MAX_LIMIT</span></code> parameters. When the robot is not homed, LinuxCNC uses the parameters from the joint sections; however, once the robot is homed, it uses the parameters from the axis sections.</p>
</div>
<p>The following code shows the configuration of joint 1 (X-axis), which corresponds to the stepper motor. The parameters specified below the comment “Custom configurations for the HAL file” are not directly used by LinuxCNC; they are used to configure the motor parameters in the <abbr title="Hardware Abstraction Layer">HAL</abbr> file (see <a class="reference internal" href="#sec-linuxcnc-configuration-hal"><span class="std std-numref">Section 3.8.2</span></a>).</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="linenos">193</span><span class="k">[JOINT_0]</span>
<span class="linenos">194</span><span class="c1"># Configuration of the first linear motor (X axis)</span>
<span class="linenos">195</span>
<span class="linenos">196</span><span class="c1"># Motor type, LINEAR or ANGULAR.</span>
<span class="linenos">197</span><span class="na">TYPE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">LINEAR</span>
<span class="linenos">198</span>
<span class="linenos">199</span><span class="c1"># Maximum tracking error, in machine units.</span>
<span class="linenos">200</span><span class="na">FERROR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1.0</span>
<span class="linenos">201</span>
<span class="linenos">202</span><span class="c1"># Maximum tracking error at slow speeds.</span>
<span class="linenos">203</span><span class="na">MIN_FERROR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0.2</span>
<span class="linenos">204</span>
<span class="linenos">205</span><span class="c1"># Maximum motor velocity, in units per second.</span>
<span class="linenos">206</span><span class="na">MAX_VELOCITY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">12.0</span>
<span class="linenos">207</span>
<span class="linenos">208</span><span class="c1"># Maximum motor acceleration, in units per second^2.</span>
<span class="linenos">209</span><span class="na">MAX_ACCELERATION</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">20.0</span>
<span class="linenos">210</span>
<span class="linenos">211</span><span class="c1"># Minimum motor limit, in machine units.</span>
<span class="linenos">212</span><span class="na">MIN_LIMIT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">-5</span>
<span class="linenos">213</span>
<span class="linenos">214</span><span class="c1"># Maximum motor limit, in machine units.</span>
<span class="linenos">215</span><span class="na">MAX_LIMIT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">205.0</span>
<span class="linenos">216</span>
<span class="linenos">217</span><span class="c1"># Position to which the joint will move upon completion of</span>
<span class="linenos">218</span><span class="c1"># the homing process.</span>
<span class="linenos">219</span><span class="na">HOME</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0</span>
<span class="linenos">220</span>
<span class="linenos">221</span><span class="c1"># Used to define the homing order.</span>
<span class="linenos">222</span><span class="na">HOME_SEQUENCE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0</span>
<span class="linenos">223</span>
<span class="linenos">224</span><span class="c1"># Home switch position, in machine units.</span>
<span class="linenos">225</span><span class="na">HOME_OFFSET</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">-10</span>
<span class="linenos">226</span>
<span class="linenos">227</span><span class="c1"># Initial homing search velocity, in units per second.</span>
<span class="linenos">228</span><span class="na">HOME_SEARCH_VEL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">-1</span>
<span class="linenos">229</span>
<span class="linenos">230</span><span class="c1"># Final homing search velocity, in units per second.</span>
<span class="linenos">231</span><span class="na">HOME_LATCH_VEL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">-0.25</span>
<span class="linenos">232</span>
<span class="linenos">233</span><span class="c1"># Final homing velocity, in units per second.</span>
<span class="linenos">234</span><span class="na">HOME_FINAL_VEL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">2</span>
<span class="linenos">235</span>
<span class="linenos">236</span><span class="c1"># Ignore limit switches during homing.</span>
<span class="linenos">237</span><span class="c1"># = YES if the same switch is used for limits and homing.</span>
<span class="linenos">238</span><span class="na">HOME_IGNORE_LIMITS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">YES</span>
<span class="linenos">239</span>
<span class="linenos">240</span><span class="c1"># The switch is shared with another joint.</span>
<span class="linenos">241</span><span class="na">HOME_IS_SHARED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0</span>
<span class="linenos">242</span>
<span class="linenos">243</span><span class="c1"># Use the encoder&#39;s index pulse for homing.</span>
<span class="linenos">244</span><span class="na">HOME_USE_INDEX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">NO</span>
<span class="linenos">245</span>
<span class="linenos">246</span><span class="c1"># ---------------------------------------------------</span>
<span class="linenos">247</span><span class="c1"># Custom configurations for the HAL file.</span>
<span class="linenos">248</span><span class="c1"># ---------------------------------------------------</span>
<span class="linenos">249</span>
<span class="linenos">250</span><span class="c1"># *** Step generation configuration ***</span>
<span class="linenos">251</span>
<span class="linenos">252</span><span class="c1"># Minimum duration of the stable direction signal before</span>
<span class="linenos">253</span><span class="c1"># starting a step, in nanoseconds.</span>
<span class="linenos">254</span><span class="na">DIRSETUP</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">10000</span>
<span class="linenos">255</span>
<span class="linenos">256</span><span class="c1"># Minimum duration of the direction signal after finishing</span>
<span class="linenos">257</span><span class="c1"># a step, in nanoseconds.</span>
<span class="linenos">258</span><span class="na">DIRHOLD</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">10000</span>
<span class="linenos">259</span>
<span class="linenos">260</span><span class="c1"># Duration of the step signal, in nanoseconds.</span>
<span class="linenos">261</span><span class="na">STEPLEN</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">2500</span>
<span class="linenos">262</span>
<span class="linenos">263</span><span class="c1"># Minimum interval between step signals, in nanoseconds.</span>
<span class="linenos">264</span><span class="na">STEPSPACE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">2500</span>
<span class="linenos">265</span>
<span class="linenos">266</span><span class="c1"># Step scale. position = steps / STEP_SCALE.</span>
<span class="linenos">267</span><span class="c1"># To move the axis 1mm/rev with a 1.8° step motor and 1/32</span>
<span class="linenos">268</span><span class="c1"># step mode, STEP_SCALE = steps / position = (32*360/1.8)/1 = 6400</span>
<span class="linenos">269</span><span class="na">STEP_SCALE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">6400</span>
<span class="linenos">270</span>
<span class="linenos">271</span><span class="c1"># Maximum velocity, in position units per second.</span>
<span class="linenos">272</span><span class="na">STEPGEN_MAXVEL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">17</span>
<span class="linenos">273</span>
<span class="linenos">274</span><span class="c1"># Maximum acceleration, in position units per second^2.</span>
<span class="linenos">275</span><span class="na">STEPGEN_MAXACCEL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">62.5</span>
<span class="linenos">276</span>
<span class="linenos">277</span><span class="c1"># Note: It is recommended that STEPGEN_MAXVEL and STEPGEN_MAXACCEL be</span>
<span class="linenos">278</span><span class="c1"># between 1% and 25% larger than MAX_VELOCITY and MAX_ACCELERATION.</span>
<span class="linenos">279</span>
<span class="linenos">280</span>
<span class="linenos">281</span><span class="c1"># *** Encoder configuration ***</span>
<span class="linenos">282</span>
<span class="linenos">283</span><span class="c1"># Encoder scale. position = counts / ENCODER_SCALE.</span>
<span class="linenos">284</span><span class="c1"># To get 1mm/rev with a 1000 ppr encoder (4000 cpr),</span>
<span class="linenos">285</span><span class="c1"># ENCODER_SCALE = counts / position = 4000 / 1 = 4000</span>
<span class="linenos">286</span><span class="na">ENCODER_SCALE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">4000.0</span>
<span class="linenos">287</span>
<span class="linenos">288</span>
<span class="linenos">289</span><span class="c1"># *** PID controller configuration ***</span>
<span class="linenos">290</span>
<span class="linenos">291</span><span class="na">P</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">50.0</span>
<span class="linenos">292</span><span class="na">I</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">20.0</span>
<span class="linenos">293</span><span class="na">D</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0.0</span>
<span class="linenos">294</span><span class="na">FF0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0.0</span>
<span class="linenos">295</span><span class="na">FF1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1.0</span>
<span class="linenos">296</span><span class="na">FF2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0.025</span>
<span class="linenos">297</span><span class="na">BIAS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0.0</span>
<span class="linenos">298</span><span class="na">DEADBAND</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0.0</span>
<span class="linenos">299</span><span class="na">MAX_OUTPUT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0.0</span>
</pre></div>
</div>
<p>The following code shows the configuration of joint 2 (Y-axis), which corresponds to the brushless motor. As before, the parameters specified below the comment “Custom configurations for the HAL file” are not directly used by LinuxCNC; they are used to configure the motor parameters in the <abbr title="Hardware Abstraction Layer">HAL</abbr> file (see <a class="reference internal" href="#sec-linuxcnc-configuration-hal"><span class="std std-numref">Section 3.8.2</span></a>). These parameters differ from the previous ones because now a brushless motor is used.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="linenos">318</span><span class="k">[JOINT_1]</span>
<span class="linenos">319</span><span class="c1"># Configuration of the second linear motor (Y axis)</span>
<span class="linenos">320</span>
<span class="linenos">321</span><span class="c1"># Motor type, LINEAR or ANGULAR.</span>
<span class="linenos">322</span><span class="na">TYPE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">LINEAR</span>
<span class="linenos">323</span>
<span class="linenos">324</span><span class="c1"># Maximum tracking error, in machine units.</span>
<span class="linenos">325</span><span class="na">FERROR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1</span>
<span class="linenos">326</span>
<span class="linenos">327</span><span class="c1"># Maximum tracking error at slow speeds.</span>
<span class="linenos">328</span><span class="na">MIN_FERROR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0.2</span>
<span class="linenos">329</span>
<span class="linenos">330</span><span class="c1"># Maximum motor velocity, in units per second.</span>
<span class="linenos">331</span><span class="na">MAX_VELOCITY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">12.0</span>
<span class="linenos">332</span>
<span class="linenos">333</span><span class="c1"># Maximum motor acceleration, in units per second^2.</span>
<span class="linenos">334</span><span class="na">MAX_ACCELERATION</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">20.0</span>
<span class="linenos">335</span>
<span class="linenos">336</span><span class="c1"># Minimum motor limit, in machine units.</span>
<span class="linenos">337</span><span class="na">MIN_LIMIT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">-5</span>
<span class="linenos">338</span>
<span class="linenos">339</span><span class="c1"># Maximum motor limit, in machine units.</span>
<span class="linenos">340</span><span class="na">MAX_LIMIT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">205.0</span>
<span class="linenos">341</span>
<span class="linenos">342</span><span class="c1"># Position to which the joint will move upon completion of</span>
<span class="linenos">343</span><span class="c1"># the homing process.</span>
<span class="linenos">344</span><span class="na">HOME</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0</span>
<span class="linenos">345</span>
<span class="linenos">346</span><span class="c1"># Used to define the homing order.</span>
<span class="linenos">347</span><span class="na">HOME_SEQUENCE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1</span>
<span class="linenos">348</span>
<span class="linenos">349</span><span class="c1"># Home switch position, in machine units.</span>
<span class="linenos">350</span><span class="na">HOME_OFFSET</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">-10</span>
<span class="linenos">351</span>
<span class="linenos">352</span><span class="c1"># Initial homing search velocity, in units per second.</span>
<span class="linenos">353</span><span class="na">HOME_SEARCH_VEL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">-1</span>
<span class="linenos">354</span>
<span class="linenos">355</span><span class="c1"># Final homing search velocity, in units per second.</span>
<span class="linenos">356</span><span class="na">HOME_LATCH_VEL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">-0.25</span>
<span class="linenos">357</span>
<span class="linenos">358</span><span class="c1"># Final homing velocity, in units per second.</span>
<span class="linenos">359</span><span class="na">HOME_FINAL_VEL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">2</span>
<span class="linenos">360</span>
<span class="linenos">361</span><span class="c1"># Ignore limit switches during homing.</span>
<span class="linenos">362</span><span class="c1"># = YES if the same switch is used for limits and homing.</span>
<span class="linenos">363</span><span class="na">HOME_IGNORE_LIMITS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">YES</span>
<span class="linenos">364</span>
<span class="linenos">365</span><span class="c1"># The switch is shared with another joint.</span>
<span class="linenos">366</span><span class="na">HOME_IS_SHARED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0</span>
<span class="linenos">367</span>
<span class="linenos">368</span><span class="c1"># Use the encoder&#39;s index pulse for homing.</span>
<span class="linenos">369</span><span class="na">HOME_USE_INDEX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">NO</span>
<span class="linenos">370</span>
<span class="linenos">371</span><span class="c1"># ---------------------------------------------------</span>
<span class="linenos">372</span><span class="c1"># Custom configurations for the HAL file.</span>
<span class="linenos">373</span><span class="c1"># ---------------------------------------------------</span>
<span class="linenos">374</span>
<span class="linenos">375</span><span class="c1"># *** Analog output configuration for +-10V ***</span>
<span class="linenos">376</span>
<span class="linenos">377</span><span class="c1"># Maximum velocity in units per second.</span>
<span class="linenos">378</span><span class="na">ANALOGOUT_MAXLIM</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">50</span>
<span class="linenos">379</span>
<span class="linenos">380</span><span class="c1"># Minimum velocity in units per second.</span>
<span class="linenos">381</span><span class="na">ANALOGOUT_MINLIM</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">-50</span>
<span class="linenos">382</span>
<span class="linenos">383</span><span class="c1"># Analog output scale. Vout = 10 * velocity / ANALOGOUT_SCALE.</span>
<span class="linenos">384</span><span class="c1"># Maximum velocity in units per second that the motor can reach.</span>
<span class="linenos">385</span><span class="c1"># For a max velocity of X rpm, with Y ppr encoder (4*Y cpr),</span>
<span class="linenos">386</span><span class="c1"># ANALOGOUT_SCALE = X / 60 * ENCODER_SCALE / (4*Y).</span>
<span class="linenos">387</span><span class="c1"># For 3000 rpm, ANALOGOUT_SCALE = 3000 / 60 * 2048 / 2048 = 50</span>
<span class="linenos">388</span><span class="na">ANALOGOUT_SCALE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">50</span>
<span class="linenos">389</span>
<span class="linenos">390</span>
<span class="linenos">391</span><span class="c1"># *** Encoder configuration ***</span>
<span class="linenos">392</span>
<span class="linenos">393</span><span class="c1"># Encoder scale. position = counts / ENCODER_SCALE.</span>
<span class="linenos">394</span><span class="c1"># To get 1mm/rev with a 512 ppr encoder (2048 cpr),</span>
<span class="linenos">395</span><span class="c1"># ENCODER_SCALE = counts / position = 2048 / 1 = 2048</span>
<span class="linenos">396</span><span class="na">ENCODER_SCALE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">2048.0</span>
<span class="linenos">397</span>
<span class="linenos">398</span>
<span class="linenos">399</span><span class="c1"># *** PID controller configuration ***</span>
<span class="linenos">400</span>
<span class="linenos">401</span><span class="na">P</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">20.0</span>
<span class="linenos">402</span><span class="na">I</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">10.0</span>
<span class="linenos">403</span><span class="na">D</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0.0</span>
<span class="linenos">404</span><span class="na">FF0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0.0</span>
<span class="linenos">405</span><span class="na">FF1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1.0</span>
<span class="linenos">406</span><span class="na">FF2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0.01</span>
<span class="linenos">407</span><span class="na">BIAS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0.0</span>
<span class="linenos">408</span><span class="na">DEADBAND</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0.0</span>
<span class="linenos">409</span><span class="na">MAX_OUTPUT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0.0</span>
</pre></div>
</div>
</li>
</ul>
</section>
</section>
<section id="hal-configuration">
<span id="sec-linuxcnc-configuration-hal"></span><h2><span class="section-number">3.8.2. </span><abbr title="Hardware Abstraction Layer">HAL</abbr> Configuration<a class="headerlink" href="#hal-configuration" title="Link to this heading">¶</a></h2>
<p><abbr title="Hardware Abstraction Layer">HAL</abbr> is a fundamental component of LinuxCNC, serving as an interface between the machine’s software and hardware. It provides the infrastructure for communication among the system’s numerous software and hardware components. The <abbr title="Hardware Abstraction Layer">HAL</abbr> layer is composed of components that:</p>
<ul class="simple">
<li><p>Are interconnected, processing incoming data and providing outputs to other components (e.g., the motion planning algorithm instructs the motors on their movement).</p></li>
<li><p>Possess the ability to communicate with hardware.</p></li>
<li><p>Always run periodically in one of the following ways:</p>
<ul>
<li><p>As real-time components, either with an execution frequency of a few microseconds (e.g., to advance a stepper motor or read an encoder) or with a frequency less than one millisecond (e.g., to adjust the planning of subsequent movements to complete a G-code instruction).</p></li>
<li><p>As non-real-time user-space components, which can be interrupted or delayed if the rest of the system is busy or overloaded.</p></li>
</ul>
</li>
</ul>
<p>The <abbr title="Hardware Abstraction Layer">HAL</abbr> components included with LinuxCNC are listed in the user manual <span id="id3">[<a class="reference internal" href="../../bibliography.html#id14" title="LinuxCNC Documentation. 2023. URL: https://linuxcnc.org/docs/.">lin23</a>]</span>, also available at <a class="reference external" href="http://linuxcnc.org/docs/stable/html/hal/components.html">http://linuxcnc.org/docs/stable/html/hal/components.html</a>. Additionally, each component has its own man page.</p>
<section id="basic-concepts">
<h3><span class="section-number">3.8.2.1. </span>Basic Concepts<a class="headerlink" href="#basic-concepts" title="Link to this heading">¶</a></h3>
<ul>
<li><p><strong>Pins and Signals</strong>: <abbr title="Hardware Abstraction Layer">HAL</abbr> is based on the same principles used to design electrical circuits and hardware systems, employing “pins” and “signals” to represent the flow of data between <abbr title="Hardware Abstraction Layer">HAL</abbr> modules or components. In summary:</p>
<ul>
<li><p>Pins can carry boolean, float, and signed or unsigned integer values.</p></li>
<li><p>Pins have a direction: input (IN), output (OUT), or input/output (I/O).</p></li>
<li><p>A signal identifies a connection between pins.</p>
<p><a class="reference internal" href="#fig-hal-circuit-concept"><span class="std std-numref">Fig. 26</span></a> from the LinuxCNC documentation <span id="id4">[<a class="reference internal" href="../../bibliography.html#id14" title="LinuxCNC Documentation. 2023. URL: https://linuxcnc.org/docs/.">lin23</a>]</span> illustrates the concepts of components, pins, and signals in <abbr title="Hardware Abstraction Layer">HAL</abbr>. In the figure, pin <code class="docutils literal notranslate"><span class="pre">pin3-out</span></code> of <code class="docutils literal notranslate"><span class="pre">component.0</span></code> connects to pins <code class="docutils literal notranslate"><span class="pre">pin3-in</span></code> and <code class="docutils literal notranslate"><span class="pre">pin4-in</span></code> of <code class="docutils literal notranslate"><span class="pre">component.1</span></code> (via the <code class="docutils literal notranslate"><span class="pre">signal-red</span></code> signal), and pin <code class="docutils literal notranslate"><span class="pre">pin1-out</span></code> of <code class="docutils literal notranslate"><span class="pre">component.1</span></code> connects to pin <code class="docutils literal notranslate"><span class="pre">pin1-in</span></code> of <code class="docutils literal notranslate"><span class="pre">component.0</span></code> (via the <code class="docutils literal notranslate"><span class="pre">signal</span> <span class="pre">blue</span></code> signal).</p>
<figure class="align-default" id="fig-hal-circuit-concept">
<img alt="../../_images/hal_circuit_concept.png" src="../../_images/hal_circuit_concept.png" />
<figcaption>
<p><span class="caption-number">Fig. 26 </span><span class="caption-text"><abbr title="Hardware Abstraction Layer">HAL</abbr> Concept — Connection as electrical circuits. Source: LinuxCNC documentation <span id="id5">[<a class="reference internal" href="../../bibliography.html#id14" title="LinuxCNC Documentation. 2023. URL: https://linuxcnc.org/docs/.">lin23</a>]</span>.</span><a class="headerlink" href="#fig-hal-circuit-concept" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
</ul>
</li>
<li><p><strong>Parameters</strong>: <abbr title="Hardware Abstraction Layer">HAL</abbr> components can have parameters, which are input or output settings not connected to any other component. There are two types of parameters:</p>
<ul class="simple">
<li><p><strong>Input parameters</strong>: Values that the user can adjust and that remain fixed once configured.</p></li>
<li><p><strong>Output parameters</strong>: Values that cannot be adjusted by the user. They allow for internal signals to be monitored.</p></li>
</ul>
</li>
<li><p><strong>Functions</strong>: Each <abbr title="Hardware Abstraction Layer">HAL</abbr> component has one or more functions that must be executed to perform the component’s task. For these functions to be executed, they must be added to a thread.</p></li>
<li><p><strong>Threads</strong>: Threads enable <abbr title="Hardware Abstraction Layer">HAL</abbr> component functions to be executed at specific time intervals. When a thread is created, the time interval at which its assigned functions will be executed is specified. Subsequently, the functions of the <abbr title="Hardware Abstraction Layer">HAL</abbr> components can be added to the thread to be executed in order at the thread’s defined time interval.</p></li>
</ul>
</section>
<section id="interaction-with-hal-and-commands">
<h3><span class="section-number">3.8.2.2. </span>Interaction with <abbr title="Hardware Abstraction Layer">HAL</abbr> and Commands<a class="headerlink" href="#interaction-with-hal-and-commands" title="Link to this heading">¶</a></h3>
<p><abbr title="Hardware Abstraction Layer">HAL</abbr> does not interact directly with the user. LinuxCNC provides various interfaces to configure or interact with <abbr title="Hardware Abstraction Layer">HAL</abbr>:</p>
<ul class="simple">
<li><p>From <code class="docutils literal notranslate"><span class="pre">.hal</span></code> files.</p></li>
<li><p>From the command line using the <code class="docutils literal notranslate"><span class="pre">halcmd</span></code> command.</p></li>
<li><p>From Python scripts.</p></li>
<li><p>From C/C++ programs.</p></li>
</ul>
<p>Configuration or interaction with <abbr title="Hardware Abstraction Layer">HAL</abbr> using any of these interfaces is performed through commands. The complete list of commands is detailed in the <code class="docutils literal notranslate"><span class="pre">halcmd</span></code> man page, also available at <a class="reference external" href="http://linuxcnc.org/docs/html/man/man1/halcmd.1.html">http://linuxcnc.org/docs/html/man/man1/halcmd.1.html</a>. The most relevant commands are:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Generally, each command must be specified on a single line. If a command needs to be split across multiple lines, a backslash (<code class="docutils literal notranslate"><span class="pre">\</span></code>) character can be used to indicate that the line continues to the next. The backslash must be the last character before the new line.</p>
</div>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">loadrt</span></code>: Loads a <abbr title="Hardware Abstraction Layer">HAL</abbr> real-time component into the system. The basic syntax of the <code class="docutils literal notranslate"><span class="pre">loadrt</span></code> command is:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>loadrt &lt;component&gt; &lt;options&gt;
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">&lt;component&gt;</span></code> is the name of the component and <code class="docutils literal notranslate"><span class="pre">&lt;options&gt;</span></code> are the component options. For example:</p>
<div class="highlight-hal notranslate"><div class="highlight"><pre><span></span><span class="k">loadrt</span> <span class="nv">mux4</span> <span class="nv">count</span><span class="o">=</span><span class="mi">1</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">addf</span></code>: Adds a function to a real-time thread. The syntax of the <code class="docutils literal notranslate"><span class="pre">addf</span></code> command is:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>addf &lt;function&gt; &lt;thread&gt;
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">&lt;function&gt;</span></code> is the name of the function and <code class="docutils literal notranslate"><span class="pre">&lt;thread&gt;</span></code> is the thread to which it will be added. For example:</p>
<div class="highlight-hal notranslate"><div class="highlight"><pre><span></span><span class="k">addf</span> <span class="nv">mux4.0</span> <span class="nv">servo-thread</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">loadusr</span></code>: Loads a non-real-time <abbr title="Hardware Abstraction Layer">HAL</abbr> component into the system. Non-real-time components are separate processes that can optionally communicate with other <abbr title="Hardware Abstraction Layer">HAL</abbr> components via pins and parameters. Real-time components cannot be loaded into non-real-time space. The syntax of the <code class="docutils literal notranslate"><span class="pre">loadusr</span></code> command is:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>loadusr [&lt;flags&gt;] &lt;command&gt;
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">&lt;command&gt;</span></code> is the program command to be executed and <code class="docutils literal notranslate"><span class="pre">&lt;flags&gt;</span></code> can be one or more of the following options:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">-i</span></code>: Ignore the program’s return value (with <code class="docutils literal notranslate"><span class="pre">-w</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-w</span></code>: Wait for the program to finish.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-W</span></code>: Wait for the component to be ready. It is assumed that the component will have the same name as the first argument of the command.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-Wn``&lt;name&gt;</span></code>: Wait for the component to be ready and assign it the name <code class="docutils literal notranslate"><span class="pre">&lt;name&gt;</span></code>. This is only applicable if the component has the <code class="docutils literal notranslate"><span class="pre">-n</span></code> option to assign a name.</p>
<p>For example:</p>
<div class="highlight-hal notranslate"><div class="highlight"><pre><span></span><span class="k">loadusr</span> <span class="o">-</span><span class="nv">Wn</span> <span class="nv">spindle</span> <span class="nv">gs2_vfd</span> <span class="o">-</span><span class="nv">n</span> <span class="nv">spindle</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">net</span></code>: Creates a connection between a signal and one or more pins. The syntax is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>net &lt;signal&gt; &lt;pin&gt;
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">&lt;signal&gt;</span></code> is the name of the signal and <code class="docutils literal notranslate"><span class="pre">&lt;pin&gt;</span></code> is the name of a pin. If the signal does not exist, a new signal is created. The command also allows the use of the words <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">=&gt;</span></code>, and <code class="docutils literal notranslate"><span class="pre">&lt;=&gt;</span></code>, separated by a space from the pin names, to indicate the direction of the signals between pins. These words are ignored by the command and merely serve to facilitate readability.</p>
<p>The following rules must be met to connect a pin to a signal:</p>
<ul>
<li><p>An input (IN) pin can always be connected to a signal.</p></li>
<li><p>An input/output (I/O) pin can be connected unless there is an output (OUT) pin on the signal.</p></li>
<li><p>An output (OUT) pin can be connected only if there are no other output (OUT) or input/output (I/O) pins on the signal.</p>
<p>The same signal name can be used in multiple <code class="docutils literal notranslate"><span class="pre">net</span></code> commands to connect additional pins, provided the above rules are respected.</p>
<p>Examples:</p>
<ul>
<li><div class="highlight-hal notranslate"><div class="highlight"><pre><span></span> <span class="k">net</span> <span class="nv">home-x</span> <span class="nv">joint.0.home-sw-in</span> <span class="o">&lt;=</span> <span class="nv">parport.0.pin-11-in</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">home-x</span></code> is the signal name, <code class="docutils literal notranslate"><span class="pre">joint.0.home-sw-in</span></code> is an input (IN) pin, <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code> is the optional direction arrow (ignored by the command), and <code class="docutils literal notranslate"><span class="pre">parport.0.pin-11-in</span></code> is an output (OUT) pin.</p>
<p>This example can also be equivalently defined in <abbr title="Hardware Abstraction Layer">HAL</abbr> by two <code class="docutils literal notranslate"><span class="pre">net</span></code> commands:</p>
<div class="highlight-hal notranslate"><div class="highlight"><pre><span></span><span class="k">net</span> <span class="nv">home-x</span> <span class="o">&lt;=</span> <span class="nv">parport.0.pin-11-in</span>
<span class="k">net</span> <span class="nv">home-x</span> <span class="o">=&gt;</span> <span class="nv">joint-0.home-sw-in</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As seen in this example, although the second pin’s name has the <code class="docutils literal notranslate"><span class="pre">-in</span></code> suffix, <abbr title="Hardware Abstraction Layer">HAL</abbr> treats it as an output pin. Therefore, when configuring pin connections in <abbr title="Hardware Abstraction Layer">HAL</abbr>, always refer to how the pin is configured in <abbr title="Hardware Abstraction Layer">HAL</abbr>, not just its name.</p>
</div>
</li>
<li><div class="highlight-hal notranslate"><div class="highlight"><pre><span></span><span class="k">net</span> <span class="nv">xStep</span> <span class="nv">stepgen.0.out</span> <span class="o">=&gt;</span> <span class="nv">parport.0.pin-02-out</span> <span class="nv">parport.0.pin-08-out</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">xStep</span></code> is the signal name, <code class="docutils literal notranslate"><span class="pre">stepgen.0.out</span></code> is an output pin, and <code class="docutils literal notranslate"><span class="pre">parport.0.pin-02-out</span></code> and <code class="docutils literal notranslate"><span class="pre">parport.0.pin-08-out</span></code> are input pins.</p>
<p>This example can also be defined in <abbr title="Hardware Abstraction Layer">HAL</abbr> by two <code class="docutils literal notranslate"><span class="pre">net</span></code> commands as follows:</p>
<div class="highlight-hal notranslate"><div class="highlight"><pre><span></span><span class="k">net</span> <span class="nv">home-x</span> <span class="o">&lt;=</span> <span class="nv">stepgen.0.out</span>
<span class="k">net</span> <span class="nv">home-x</span> <span class="o">=&gt;</span> <span class="nv">parport.0.pin-02-out</span> <span class="nv">parport.0.pin-08-out</span>
</pre></div>
</div>
</li>
</ul>
</li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">setp</span></code>: Sets the value of a pin or parameter. Valid values depend on the pin or parameter’s data type. The syntax of this command is:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>setp &lt;name&gt; &lt;value&gt;
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">&lt;name&gt;</span></code> is the name of the pin or parameter and <code class="docutils literal notranslate"><span class="pre">&lt;value&gt;</span></code> is the value to which it is to be set. The command will fail if <code class="docutils literal notranslate"><span class="pre">&lt;name&gt;</span></code> does not exist as a pin or parameter, if it is a read-only parameter, if it is an output (OUT) pin, if it is a pin that is already connected to a signal, or if <code class="docutils literal notranslate"><span class="pre">&lt;value&gt;</span></code> is not a valid value for the pin or parameter’s data type.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">sets</span></code>: Sets the value of a signal. The syntax is:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>sets &lt;signal&gt; &lt;value&gt;
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">&lt;signal&gt;</span></code> is the name of the signal and <code class="docutils literal notranslate"><span class="pre">&lt;value&gt;</span></code> is the value to which it is to be set. The command will fail if <code class="docutils literal notranslate"><span class="pre">&lt;signal&gt;</span></code> does not exist as a signal, if the signal is already connected to an output (OUT) pin, or if <code class="docutils literal notranslate"><span class="pre">&lt;value&gt;</span></code> is not a valid value for the signal’s data type.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">unlinkp</span></code>: Unlinks a pin from its connected signal. The syntax of the command is:</p>
<div class="highlight-hal notranslate"><div class="highlight"><pre><span></span><span class="nv">unlinkp</span> <span class="o">&lt;</span><span class="nv">name</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">&lt;name&gt;</span></code> is the name of the pin. If the pin does not have a connected signal, nothing happens. The command will fail if <code class="docutils literal notranslate"><span class="pre">&lt;name&gt;</span></code> does not exist as a pin.</p>
</li>
</ul>
</section>
<section id="hal-file-format">
<h3><span class="section-number">3.8.2.3. </span>.hal File Format<a class="headerlink" href="#hal-file-format" title="Link to this heading">¶</a></h3>
<p>A <code class="docutils literal notranslate"><span class="pre">.hal</span></code> file is a plain text file containing <abbr title="Hardware Abstraction Layer">HAL</abbr> commands. Comments can be included by starting lines with the hash symbol (<code class="docutils literal notranslate"><span class="pre">#</span></code>). Options from the <code class="docutils literal notranslate"><span class="pre">.ini</span></code> file can be accessed with the syntax <code class="docutils literal notranslate"><span class="pre">[&lt;section&gt;]&lt;option&gt;</span></code>, where <code class="docutils literal notranslate"><span class="pre">[&lt;section&gt;]</span></code> is the section name in square brackets and <code class="docutils literal notranslate"><span class="pre">&lt;option&gt;</span></code> is the corresponding option name within that section.</p>
</section>
<section id="example-mesa-7i96s-7i77-xy-hal-configuration-file">
<h3><span class="section-number">3.8.2.4. </span>Example: <code class="docutils literal notranslate"><span class="pre">mesa_7i96s_7i77_xy.hal</span></code> Configuration File<a class="headerlink" href="#example-mesa-7i96s-7i77-xy-hal-configuration-file" title="Link to this heading">¶</a></h3>
<p>As noted in <a class="reference internal" href="06_linuxcnc_introduction.html#sec-linuxcnc-intro-config"><span class="std std-numref">Section 3.6.2</span></a>, a LinuxCNC configuration includes at least one <code class="docutils literal notranslate"><span class="pre">.ini</span></code> file and one <code class="docutils literal notranslate"><span class="pre">.hal</span></code> file. Below is the <code class="docutils literal notranslate"><span class="pre">mesa_7i96s_7i77_xy.hal</span></code> configuration file, corresponding to the <code class="docutils literal notranslate"><span class="pre">mesa_7i96s_7i77_xy.ini</span></code> file detailed in <a class="reference internal" href="#sec-linuxcnc-configuration-ini"><span class="std std-numref">Section 3.8.1</span></a>. Unlike the <code class="docutils literal notranslate"><span class="pre">.ini</span></code> format, the <code class="docutils literal notranslate"><span class="pre">.hal</span></code> format does not have a formal section syntax; however, for clarity, the file is presented below divided into different parts.</p>
<ul>
<li><p><strong>Load modules, add functions to threads, and other initial configurations</strong>:</p>
<div class="highlight-hal notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c"># Load kinematics module</span>
<span class="linenos"> 2</span><span class="k">loadrt</span> <span class="p">[</span><span class="nv">KINS</span><span class="p">]</span><span class="nv">KINEMATICS</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="c"># Load motion controller module</span>
<span class="linenos"> 5</span><span class="c"># The &quot;servo_period_nsec&quot; option creates the &quot;servo-thread&quot; thread</span>
<span class="linenos"> 6</span><span class="k">loadrt</span> <span class="p">[</span><span class="nv">EMCMOT</span><span class="p">]</span><span class="nv">EMCMOT</span> <span class="nv">servo_period_nsec</span><span class="o">=</span><span class="p">[</span><span class="nv">EMCMOT</span><span class="p">]</span><span class="nv">SERVO_PERIOD</span> <span class="nv">num_joints</span><span class="o">=</span><span class="p">[</span><span class="nv">KINS</span><span class="p">]</span><span class="nv">JOINTS</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="c"># Load MESA board controller</span>
<span class="linenos"> 9</span><span class="k">loadrt</span> <span class="nv">hostmot2</span>
<span class="linenos">10</span>
<span class="linenos">11</span><span class="c"># Load MESA low-level Ethernet Anything IO boards controller</span>
<span class="linenos">12</span><span class="c"># (Mesa Electronics Ethernet Anything IO boards)</span>
<span class="linenos">13</span><span class="k">loadrt</span> <span class="nv">hm2_eth</span> <span class="nv">board_ip</span><span class="o">=</span><span class="s">&quot;10.68.33.122&quot;</span> <span class="nv">config</span><span class="o">=</span><span class="s">&quot;num_encoders=2 num_pwmgens=0 num_stepgens=1&quot;</span>
<span class="linenos">14</span>
<span class="linenos">15</span><span class="c"># Load ladder language module</span>
<span class="linenos">16</span><span class="k">loadrt</span> <span class="nv">classicladder_rt</span>
<span class="linenos">17</span>
<span class="linenos">18</span><span class="c"># Load pid module and create a controller for each axis</span>
<span class="linenos">19</span><span class="k">loadrt</span> <span class="nv">pid</span> <span class="k">names</span><span class="o">=</span><span class="nv">pid.x</span><span class="p">,</span><span class="nv">pid.y</span>
<span class="linenos">20</span>
<span class="linenos">21</span><span class="c"># Load estop_latch module to handle emergency stop</span>
<span class="linenos">22</span><span class="k">loadrt</span> <span class="nv">estop_latch</span>
<span class="linenos">23</span>
<span class="linenos">24</span><span class="c"># Load oneshot module (pulse generator)</span>
<span class="linenos">25</span><span class="k">loadrt</span> <span class="nv">oneshot</span>
<span class="linenos">26</span>
<span class="linenos">27</span><span class="c"># Load logic module and define a 5-input OR function</span>
<span class="linenos">28</span><span class="k">loadrt</span> <span class="nv">logic</span> <span class="k">names</span><span class="o">=</span><span class="nv">logic.fault</span> <span class="k">personality</span><span class="o">=</span><span class="mh">0x205</span>
<span class="linenos">29</span>
<span class="linenos">30</span><span class="c"># Configure the watchdog timeout for the MESA 7I96S board</span>
<span class="linenos">31</span><span class="k">setp</span> <span class="nv">hm2_7i96s.0.watchdog.timeout_ns</span> <span class="mi">5000000</span>
<span class="linenos">32</span>
<span class="linenos">33</span><span class="c"># Configure dpll (digital phase locked loop) of the hostmot2 module</span>
<span class="linenos">34</span><span class="k">setp</span> <span class="nv">hm2_7i96s.0.dpll.01.timer-us</span> <span class="mi">-100</span>
<span class="linenos">35</span><span class="k">setp</span> <span class="nv">hm2_7i96s.0.stepgen.timer-number</span> <span class="mi">1</span>
<span class="linenos">36</span><span class="k">setp</span> <span class="nv">hm2_7i96s.0.encoder.timer-number</span> <span class="mi">1</span>
<span class="linenos">37</span>
<span class="linenos">38</span><span class="c"># Configure pulse parameters of the oneshot module</span>
<span class="linenos">39</span><span class="k">setp</span> <span class="nv">oneshot.0.width</span> <span class="mf">0.1</span>
<span class="linenos">40</span>
<span class="linenos">41</span><span class="c"># Add functions to the servo thread</span>
<span class="linenos">42</span><span class="k">addf</span> <span class="nv">motion-command-handler</span> <span class="nv">servo-thread</span>
<span class="linenos">43</span><span class="k">addf</span> <span class="nv">motion-controller</span> <span class="nv">servo-thread</span>
<span class="linenos">44</span><span class="k">addf</span> <span class="nv">pid.x.do-pid-calcs</span> <span class="nv">servo-thread</span>
<span class="linenos">45</span><span class="k">addf</span> <span class="nv">pid.y.do-pid-calcs</span> <span class="nv">servo-thread</span>
<span class="linenos">46</span><span class="k">addf</span> <span class="nv">hm2_7i96s.0.read</span> <span class="nv">servo-thread</span>
<span class="linenos">47</span><span class="k">addf</span> <span class="nv">hm2_7i96s.0.write</span> <span class="nv">servo-thread</span>
<span class="linenos">48</span><span class="k">addf</span> <span class="nv">classicladder.0.refresh</span> <span class="nv">servo-thread</span>
<span class="linenos">49</span><span class="k">addf</span> <span class="nv">estop-latch.0</span> <span class="nv">servo-thread</span>
<span class="linenos">50</span><span class="k">addf</span> <span class="nv">oneshot.0</span> <span class="nv">servo-thread</span>
<span class="linenos">51</span><span class="k">addf</span> <span class="nv">logic.fault</span> <span class="nv">servo-thread</span>
<span class="linenos">52</span>
<span class="linenos">53</span><span class="c"># Load classicladder project</span>
<span class="linenos">54</span><span class="k">loadusr</span> <span class="nv">classicladder</span> <span class="nv">myladder.clp</span> <span class="o">--</span><span class="nv">nogui</span>
</pre></div>
</div>
</li>
<li><p><strong>X-axis configuration (joint 0, stepper motor)</strong>:</p>
<div class="highlight-hal notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 57</span><span class="c">#********************</span>
<span class="linenos"> 58</span><span class="c"># AXIS X --- JOINT 0</span>
<span class="linenos"> 59</span><span class="c">#********************</span>
<span class="linenos"> 60</span>
<span class="linenos"> 61</span><span class="c"># --- PID controller parameters ---</span>
<span class="linenos"> 62</span>
<span class="linenos"> 63</span><span class="k">setp</span> <span class="nv">pid.x.Pgain</span>     <span class="p">[</span><span class="nv">JOINT_0</span><span class="p">]</span><span class="nv">P</span>
<span class="linenos"> 64</span><span class="k">setp</span> <span class="nv">pid.x.Igain</span>     <span class="p">[</span><span class="nv">JOINT_0</span><span class="p">]</span><span class="nv">I</span>
<span class="linenos"> 65</span><span class="k">setp</span> <span class="nv">pid.x.Dgain</span>     <span class="p">[</span><span class="nv">JOINT_0</span><span class="p">]</span><span class="nv">D</span>
<span class="linenos"> 66</span><span class="k">setp</span> <span class="nv">pid.x.bias</span>      <span class="p">[</span><span class="nv">JOINT_0</span><span class="p">]</span><span class="nv">BIAS</span>
<span class="linenos"> 67</span><span class="k">setp</span> <span class="nv">pid.x.FF0</span>       <span class="p">[</span><span class="nv">JOINT_0</span><span class="p">]</span><span class="nv">FF0</span>
<span class="linenos"> 68</span><span class="k">setp</span> <span class="nv">pid.x.FF1</span>       <span class="p">[</span><span class="nv">JOINT_0</span><span class="p">]</span><span class="nv">FF1</span>
<span class="linenos"> 69</span><span class="k">setp</span> <span class="nv">pid.x.FF2</span>       <span class="p">[</span><span class="nv">JOINT_0</span><span class="p">]</span><span class="nv">FF2</span>
<span class="linenos"> 70</span><span class="k">setp</span> <span class="nv">pid.x.deadband</span>  <span class="p">[</span><span class="nv">JOINT_0</span><span class="p">]</span><span class="nv">DEADBAND</span>
<span class="linenos"> 71</span><span class="k">setp</span> <span class="nv">pid.x.maxoutput</span> <span class="p">[</span><span class="nv">JOINT_0</span><span class="p">]</span><span class="nv">MAX_OUTPUT</span>
<span class="linenos"> 72</span><span class="k">setp</span> <span class="nv">pid.x.error-previous-target</span> <span class="kc">true</span>
<span class="linenos"> 73</span><span class="k">setp</span> <span class="nv">pid.x.maxerror</span> <span class="mi">1</span>
<span class="linenos"> 74</span>
<span class="linenos"> 75</span>
<span class="linenos"> 76</span><span class="c"># --- Pulse generator parameters ---</span>
<span class="linenos"> 77</span>
<span class="linenos"> 78</span><span class="k">setp</span> <span class="nv">hm2_7i96s.0.stepgen.00.control-type</span>   <span class="mi">1</span>  <span class="c"># Velocity control</span>
<span class="linenos"> 79</span><span class="k">setp</span> <span class="nv">hm2_7i96s.0.stepgen.00.step_type</span>      <span class="mi">0</span>  <span class="c"># Step/dir</span>
<span class="linenos"> 80</span><span class="k">setp</span> <span class="nv">hm2_7i96s.0.stepgen.00.dirsetup</span>       <span class="p">[</span><span class="nv">JOINT_0</span><span class="p">]</span><span class="nv">DIRSETUP</span>
<span class="linenos"> 81</span><span class="k">setp</span> <span class="nv">hm2_7i96s.0.stepgen.00.dirhold</span>        <span class="p">[</span><span class="nv">JOINT_0</span><span class="p">]</span><span class="nv">DIRHOLD</span>
<span class="linenos"> 82</span><span class="k">setp</span> <span class="nv">hm2_7i96s.0.stepgen.00.steplen</span>        <span class="p">[</span><span class="nv">JOINT_0</span><span class="p">]</span><span class="nv">STEPLEN</span>
<span class="linenos"> 83</span><span class="k">setp</span> <span class="nv">hm2_7i96s.0.stepgen.00.stepspace</span>      <span class="p">[</span><span class="nv">JOINT_0</span><span class="p">]</span><span class="nv">STEPSPACE</span>
<span class="linenos"> 84</span><span class="k">setp</span> <span class="nv">hm2_7i96s.0.stepgen.00.position-scale</span> <span class="p">[</span><span class="nv">JOINT_0</span><span class="p">]</span><span class="nv">STEP_SCALE</span>
<span class="linenos"> 85</span><span class="k">setp</span> <span class="nv">hm2_7i96s.0.stepgen.00.maxaccel</span>       <span class="p">[</span><span class="nv">JOINT_0</span><span class="p">]</span><span class="nv">STEPGEN_MAXACCEL</span>
<span class="linenos"> 86</span><span class="k">setp</span> <span class="nv">hm2_7i96s.0.stepgen.00.maxvel</span>         <span class="p">[</span><span class="nv">JOINT_0</span><span class="p">]</span><span class="nv">STEPGEN_MAXVEL</span>
<span class="linenos"> 87</span>
<span class="linenos"> 88</span>
<span class="linenos"> 89</span><span class="c"># --- Encoder parameters ---</span>
<span class="linenos"> 90</span>
<span class="linenos"> 91</span><span class="k">setp</span> <span class="nv">hm2_7i96s.0.encoder.00.counter-mode</span> <span class="mi">0</span>
<span class="linenos"> 92</span><span class="k">setp</span> <span class="nv">hm2_7i96s.0.encoder.00.filter</span> <span class="mi">1</span>
<span class="linenos"> 93</span><span class="k">setp</span> <span class="nv">hm2_7i96s.0.encoder.00.scale</span> <span class="p">[</span><span class="nv">JOINT_0</span><span class="p">]</span><span class="nv">ENCODER_SCALE</span>
<span class="linenos"> 94</span>
<span class="linenos"> 95</span>
<span class="linenos"> 96</span><span class="c"># --- Connect pid / stepgen / motion signals ---</span>
<span class="linenos"> 97</span>
<span class="linenos"> 98</span><span class="k">net</span> <span class="nv">pid-x-index-enable</span> <span class="o">=&gt;</span> <span class="nv">pid.x.index-enable</span>
<span class="linenos"> 99</span>
<span class="linenos">100</span><span class="k">net</span> <span class="nv">pid-x-output</span> <span class="o">&lt;=</span> <span class="nv">pid.x.output</span>
<span class="linenos">101</span><span class="k">net</span> <span class="nv">pid-x-output</span> <span class="o">=&gt;</span> <span class="nv">hm2_7i96s.0.stepgen.00.velocity-cmd</span>
<span class="linenos">102</span>
<span class="linenos">103</span><span class="k">net</span> <span class="nv">pid-x-enable</span> <span class="o">&lt;=</span> <span class="nv">joint.0.amp-enable-out</span>
<span class="linenos">104</span><span class="k">net</span> <span class="nv">pid-x-enable</span> <span class="o">=&gt;</span> <span class="nv">pid.x.enable</span>
<span class="linenos">105</span><span class="k">net</span> <span class="nv">pid-x-enable</span> <span class="o">=&gt;</span> <span class="nv">hm2_7i96s.0.stepgen.00.enable</span>
<span class="linenos">106</span>
<span class="linenos">107</span><span class="k">net</span> <span class="nv">pid-x-pos-cmd</span> <span class="o">&lt;=</span> <span class="nv">joint.0.motor-pos-cmd</span>
<span class="linenos">108</span><span class="k">net</span> <span class="nv">pid-x-pos-cmd</span> <span class="o">=&gt;</span> <span class="nv">pid.x.command</span>
<span class="linenos">109</span>
<span class="linenos">110</span><span class="c"># net pid-x-pos-fb &lt;= hm2_7i96s.0.stepgen.00.position-fb</span>
<span class="linenos">111</span><span class="k">net</span> <span class="nv">pid-x-pos-fb</span> <span class="o">&lt;=</span> <span class="nv">hm2_7i96s.0.encoder.00.position</span>
<span class="linenos">112</span><span class="k">net</span> <span class="nv">pid-x-pos-fb</span> <span class="o">=&gt;</span> <span class="nv">pid.x.feedback</span>
<span class="linenos">113</span><span class="k">net</span> <span class="nv">pid-x-pos-fb</span> <span class="o">=&gt;</span> <span class="nv">joint.0.motor-pos-fb</span>
<span class="linenos">114</span>
<span class="linenos">115</span>
<span class="linenos">116</span><span class="c"># --- Configure home / limit signals ---</span>
<span class="linenos">117</span>
<span class="linenos">118</span><span class="k">net</span> <span class="nv">x-sw</span> <span class="o">&lt;=</span> <span class="nv">hm2_7i96s.0.gpio.000.in</span>
<span class="linenos">119</span><span class="k">net</span> <span class="nv">x-sw</span> <span class="o">=&gt;</span> <span class="nv">joint.0.home-sw-in</span>
<span class="linenos">120</span><span class="k">net</span> <span class="nv">x-sw</span> <span class="o">=&gt;</span> <span class="nv">joint.0.neg-lim-sw-in</span>
</pre></div>
</div>
</li>
<li><p><strong>Y-axis configuration (joint 1, brushless motor)</strong>:</p>
<div class="highlight-hal notranslate"><div class="highlight"><pre><span></span><span class="linenos">123</span><span class="c"># MDI Command. Can be specified multiple times.</span>
<span class="linenos">124</span><span class="c"># To execute it use the halui.mdi-command-NN pin,</span>
<span class="linenos">125</span><span class="c"># where NN is the command number.</span>
<span class="linenos">126</span><span class="c"># MDI_COMMAND = G1 X0 Y0 Z0</span>
<span class="linenos">127</span>
<span class="linenos">128</span>
<span class="linenos">129</span><span class="p">[</span><span class="nv">KINS</span><span class="p">]</span>
<span class="linenos">130</span><span class="c"># Kinematics</span>
<span class="linenos">131</span>
<span class="linenos">132</span><span class="c"># Number of joints (motors).</span>
<span class="linenos">133</span><span class="nv">JOINTS</span> <span class="o">=</span> <span class="mi">2</span>
<span class="linenos">134</span>
<span class="linenos">135</span><span class="c"># Kinematics module</span>
<span class="linenos">136</span><span class="c"># Not used by LinuxCNC directly, used in the HAL file.</span>
<span class="linenos">137</span><span class="nv">KINEMATICS</span> <span class="o">=</span> <span class="nv">trivkins</span> <span class="nv">coordinates</span><span class="o">=</span><span class="nv">XY</span>
<span class="linenos">138</span>
<span class="linenos">139</span>
<span class="linenos">140</span><span class="p">[</span><span class="nv">APPLICATIONS</span><span class="p">]</span>
<span class="linenos">141</span><span class="c"># Additional applications</span>
<span class="linenos">142</span>
<span class="linenos">143</span><span class="c"># Application to execute. Can be specified multiple times.</span>
<span class="linenos">144</span><span class="nv">APP</span><span class="o">=</span><span class="nv">halscope</span> <span class="mi">50000</span>
<span class="linenos">145</span>
<span class="linenos">146</span>
<span class="linenos">147</span><span class="p">[</span><span class="nv">TRAJ</span><span class="p">]</span>
<span class="linenos">148</span><span class="c"># Trajectory planner configuration</span>
<span class="linenos">149</span>
<span class="linenos">150</span><span class="c"># Controlled axes. Possible values: X, Y, Z, A, B, C, U, V, W.</span>
<span class="linenos">151</span><span class="c"># An axis can be specified more than once, e.g., XXYZ.</span>
<span class="linenos">152</span><span class="nv">COORDINATES</span> <span class="o">=</span>  <span class="nv">XY</span>
<span class="linenos">153</span>
<span class="linenos">154</span><span class="c"># Units for linear axes.</span>
<span class="linenos">155</span><span class="nv">LINEAR_UNITS</span> <span class="o">=</span> <span class="nv">mm</span>
<span class="linenos">156</span>
<span class="linenos">157</span><span class="c"># Units for rotary axes.</span>
<span class="linenos">158</span><span class="nv">ANGULAR_UNITS</span> <span class="o">=</span> <span class="nv">degree</span>
<span class="linenos">159</span>
<span class="linenos">160</span><span class="c"># Maximum linear velocity, in units per second.</span>
<span class="linenos">161</span><span class="nv">MAX_LINEAR_VELOCITY</span> <span class="o">=</span> <span class="mf">12.00</span>
<span class="linenos">162</span>
<span class="linenos">163</span><span class="c"># Maximum linear acceleration, in units per second^2.</span>
<span class="linenos">164</span><span class="nv">MAX_LINEAR_ACCELERATION</span> <span class="o">=</span> <span class="mf">20.0</span>
<span class="linenos">165</span>
<span class="linenos">166</span>
<span class="linenos">167</span><span class="p">[</span><span class="nv">EMCIO</span><span class="p">]</span>
<span class="linenos">168</span><span class="c"># Input/Output (I/O) controller configuration</span>
<span class="linenos">169</span>
<span class="linenos">170</span><span class="c"># Input/output controller module.</span>
<span class="linenos">171</span><span class="nv">EMCIO</span> <span class="o">=</span> <span class="nv">io</span>
<span class="linenos">172</span>
<span class="linenos">173</span><span class="c"># Period at which EMCIO will be executed.</span>
<span class="linenos">174</span><span class="nv">CYCLE_TIME</span> <span class="o">=</span> <span class="mf">0.100</span>
<span class="linenos">175</span>
<span class="linenos">176</span>
<span class="linenos">177</span><span class="p">[</span><span class="nv">AXIS_X</span><span class="p">]</span>
<span class="linenos">178</span><span class="c"># X axis configuration</span>
</pre></div>
</div>
</li>
<li><p><strong>Other configurations</strong>:</p>
<div class="highlight-hal notranslate"><div class="highlight"><pre><span></span><span class="linenos">182</span><span class="c">#***************</span>
<span class="linenos">183</span><span class="c"># Other signals</span>
<span class="linenos">184</span><span class="c">#***************</span>
<span class="linenos">185</span>
<span class="linenos">186</span><span class="c"># --- Igus controller alert and error signals ---</span>
<span class="linenos">187</span>
<span class="linenos">188</span><span class="k">net</span> <span class="nv">X-alert</span> <span class="o">&lt;=</span> <span class="nv">hm2_7i96s.0.7i77.0.0.input-08</span>
<span class="linenos">189</span><span class="k">net</span> <span class="nv">X-error</span> <span class="o">&lt;=</span> <span class="nv">hm2_7i96s.0.7i77.0.0.input-09</span>
<span class="linenos">190</span>
<span class="linenos">191</span><span class="k">net</span> <span class="nv">Y-alert</span> <span class="o">&lt;=</span> <span class="nv">hm2_7i96s.0.7i77.0.0.input-01</span>
<span class="linenos">192</span><span class="k">net</span> <span class="nv">Y-error</span> <span class="o">&lt;=</span> <span class="nv">hm2_7i96s.0.7i77.0.0.input-02</span>
<span class="linenos">193</span>
<span class="linenos">194</span>
<span class="linenos">195</span><span class="c"># --- External emergency stop ---</span>
<span class="linenos">196</span>
<span class="linenos">197</span><span class="k">net</span> <span class="nv">remote-estop</span> <span class="o">&lt;=</span> <span class="nv">hm2_7i96s.0.7i77.0.0.input-13</span>
<span class="linenos">198</span>
<span class="linenos">199</span>
<span class="linenos">200</span><span class="c"># --- Fault signal (logic.fault) ---</span>
<span class="linenos">201</span><span class="c"># The fault signal will be activated if an Igus controller</span>
<span class="linenos">202</span><span class="c"># emits an error or alert signal or the user presses the</span>
<span class="linenos">203</span><span class="c"># emergency stop button (ESTOP).</span>
<span class="linenos">204</span>
<span class="linenos">205</span><span class="k">net</span> <span class="nv">X-alert</span> <span class="o">=&gt;</span> <span class="nv">logic.fault.in-00</span>
<span class="linenos">206</span><span class="k">net</span> <span class="nv">X-error</span> <span class="o">=&gt;</span> <span class="nv">logic.fault.in-01</span>
<span class="linenos">207</span>
<span class="linenos">208</span><span class="k">net</span> <span class="nv">Y-alert</span> <span class="o">=&gt;</span> <span class="nv">logic.fault.in-02</span>
<span class="linenos">209</span><span class="k">net</span> <span class="nv">Y-error</span> <span class="o">=&gt;</span> <span class="nv">logic.fault.in-03</span>
<span class="linenos">210</span>
<span class="linenos">211</span><span class="k">net</span> <span class="nv">remote-estop</span> <span class="o">=&gt;</span> <span class="nv">logic.fault.in-04</span>
<span class="linenos">212</span>
<span class="linenos">213</span>
<span class="linenos">214</span><span class="c"># --- Emergency stop (ESTOP) ---</span>
<span class="linenos">215</span>
<span class="linenos">216</span><span class="k">net</span> <span class="nv">user-enable</span> <span class="o">&lt;=</span> <span class="nv">iocontrol.0.user-enable-out</span>
<span class="linenos">217</span><span class="k">net</span> <span class="nv">user-enable</span> <span class="o">=&gt;</span> <span class="nv">estop-latch.0.ok-in</span>
<span class="linenos">218</span>
<span class="linenos">219</span><span class="k">net</span> <span class="nv">user-request-enable</span> <span class="o">&lt;=</span> <span class="nv">iocontrol.0.user-request-enable</span>
<span class="linenos">220</span><span class="k">net</span> <span class="nv">user-request-enable</span> <span class="o">=&gt;</span> <span class="nv">estop-latch.0.reset</span>
<span class="linenos">221</span>
<span class="linenos">222</span><span class="k">net</span> <span class="nv">fault</span> <span class="o">&lt;=</span> <span class="nv">logic.fault.or</span>
<span class="linenos">223</span><span class="k">net</span> <span class="nv">fault</span> <span class="o">=&gt;</span> <span class="nv">estop-latch.0.fault-in</span>
<span class="linenos">224</span>
<span class="linenos">225</span><span class="k">net</span> <span class="nv">emc-enable</span> <span class="o">&lt;=</span> <span class="nv">estop-latch.0.ok-out</span>
<span class="linenos">226</span><span class="k">net</span> <span class="nv">emc-enable</span> <span class="o">=&gt;</span> <span class="nv">iocontrol.0.emc-enable-in</span>
<span class="linenos">227</span>
<span class="linenos">228</span>
<span class="linenos">229</span><span class="c"># --- Enable motors ---</span>
<span class="linenos">230</span>
<span class="linenos">231</span><span class="k">net</span> <span class="nv">machine-on</span> <span class="o">&lt;=</span> <span class="nv">halui.machine.is-on</span>
<span class="linenos">232</span><span class="k">net</span> <span class="nv">machine-on</span> <span class="o">=&gt;</span> <span class="nv">hm2_7i96s.0.7i77.0.0.output-00</span>
<span class="linenos">233</span>
<span class="linenos">234</span>
<span class="linenos">235</span><span class="c"># --- Pulse to start brushless motor rotation program ---</span>
<span class="linenos">236</span>
<span class="linenos">237</span><span class="k">net</span> <span class="nv">brushless-ready</span> <span class="o">&lt;=</span> <span class="nv">hm2_7i96s.0.7i77.0.0.input-00</span>
<span class="linenos">238</span><span class="k">net</span> <span class="nv">brushless-ready</span> <span class="o">=&gt;</span> <span class="nv">oneshot.0.in</span>
<span class="linenos">239</span>
<span class="linenos">240</span><span class="k">net</span> <span class="nv">start-brushless</span> <span class="o">&lt;=</span> <span class="nv">oneshot.0.out</span>
<span class="linenos">241</span><span class="k">net</span> <span class="nv">start-brushless</span> <span class="o">=&gt;</span> <span class="nv">hm2_7i96s.0.7i77.0.0.output-01</span>
<span class="linenos">242</span>
<span class="linenos">243</span>
<span class="linenos">244</span><span class="c"># --- LED indicators panel ---</span>
<span class="linenos">245</span>
<span class="linenos">246</span><span class="k">net</span> <span class="nv">machine-estop</span> <span class="o">&lt;=</span> <span class="nv">halui.estop.is-activated</span>
<span class="linenos">247</span>
<span class="linenos">248</span><span class="k">net</span> <span class="nv">machine-estop</span> <span class="o">=&gt;</span> <span class="nv">classicladder.0.in-00</span>
<span class="linenos">249</span><span class="k">net</span> <span class="nv">remote-estop</span> <span class="o">=&gt;</span> <span class="nv">classicladder.0.in-01</span>
<span class="linenos">250</span><span class="k">net</span> <span class="nv">machine-on</span> <span class="o">=&gt;</span> <span class="nv">classicladder.0.in-02</span>
<span class="linenos">251</span>
<span class="linenos">252</span><span class="k">net</span> <span class="nv">X-error</span> <span class="o">=&gt;</span> <span class="nv">classicladder.0.in-03</span>
<span class="linenos">253</span><span class="k">net</span> <span class="nv">X-alert</span> <span class="o">=&gt;</span> <span class="nv">classicladder.0.in-08</span>
<span class="linenos">254</span>
<span class="linenos">255</span><span class="k">net</span> <span class="nv">Y-error</span> <span class="o">=&gt;</span> <span class="nv">classicladder.0.in-05</span>
<span class="linenos">256</span><span class="k">net</span> <span class="nv">Y-alert</span> <span class="o">=&gt;</span> <span class="nv">classicladder.0.in-10</span>
<span class="linenos">257</span>
<span class="linenos">258</span><span class="k">net</span> <span class="nv">led-red</span> <span class="o">&lt;=</span> <span class="nv">classicladder.0.out-00</span>
<span class="linenos">259</span><span class="k">net</span> <span class="nv">led-red</span> <span class="o">=&gt;</span> <span class="nv">hm2_7i96s.0.7i77.0.0.output-02</span>
<span class="linenos">260</span>
<span class="linenos">261</span><span class="k">net</span> <span class="nv">led-yellow</span> <span class="o">&lt;=</span> <span class="nv">classicladder.0.out-01</span>
<span class="linenos">262</span><span class="k">net</span> <span class="nv">led-yellow</span> <span class="o">=&gt;</span> <span class="nv">hm2_7i96s.0.7i77.0.0.output-03</span>
<span class="linenos">263</span>
<span class="linenos">264</span><span class="k">net</span> <span class="nv">led-green</span> <span class="o">&lt;=</span> <span class="nv">classicladder.0.out-02</span>
<span class="linenos">265</span><span class="k">net</span> <span class="nv">led-green</span> <span class="o">=&gt;</span> <span class="nv">hm2_7i96s.0.7i77.0.0.output-04</span>
</pre></div>
</div>
</li>
</ul>
</section>
</section>
<section id="hal-tools">
<h2><span class="section-number">3.8.3. </span><abbr title="Hardware Abstraction Layer">HAL</abbr> Tools<a class="headerlink" href="#hal-tools" title="Link to this heading">¶</a></h2>
<p>Several <abbr title="Hardware Abstraction Layer">HAL</abbr> tools are available for real-time visualization and diagnosis of pin states. The most notable ones are described below; for a complete list of tools, consult the LinuxCNC user manual <span id="id6">[<a class="reference internal" href="../../bibliography.html#id14" title="LinuxCNC Documentation. 2023. URL: https://linuxcnc.org/docs/.">lin23</a>]</span>.</p>
<section id="halcmd">
<h3><span class="section-number">3.8.3.1. </span>Halcmd<a class="headerlink" href="#halcmd" title="Link to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">halcmd</span></code> is a command-line tool for interacting with <abbr title="Hardware Abstraction Layer">HAL</abbr>. When <code class="docutils literal notranslate"><span class="pre">halcmd</span></code> is executed, the following command line will appear:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>halcmd:
</pre></div>
</div>
<p>This prompt allows you to enter and execute <abbr title="Hardware Abstraction Layer">HAL</abbr> commands. Besides the commands detailed previously in <a class="reference internal" href="#sec-linuxcnc-configuration-hal"><span class="std std-numref">Section 3.8.2</span></a>, other commands such as <code class="docutils literal notranslate"><span class="pre">show</span></code>, <code class="docutils literal notranslate"><span class="pre">list</span></code>, or <code class="docutils literal notranslate"><span class="pre">save</span></code> can be very useful. These commands enable printing various elements defined in <abbr title="Hardware Abstraction Layer">HAL</abbr>, such as pins, parameters, threads, etc. The complete list of commands is detailed in the <code class="docutils literal notranslate"><span class="pre">halcmd</span></code> man page, also available at <a class="reference external" href="http://linuxcnc.org/docs/html/man/man1/halcmd.1.html">http://linuxcnc.org/docs/html/man/man1/halcmd.1.html</a>.</p>
</section>
<section id="halshow">
<h3><span class="section-number">3.8.3.2. </span>Halshow<a class="headerlink" href="#halshow" title="Link to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">halshow</span></code> is a graphical tool that allows viewing and monitoring <abbr title="Hardware Abstraction Layer">HAL</abbr> components such as pins, parameters, signals, and functions. This tool is shown in Figures <a class="reference internal" href="#fig-halshow-show"><span class="std std-numref">27</span></a> and <a class="reference internal" href="#fig-halshow-watch"><span class="std std-numref">28</span></a>. The tool has the following main elements:</p>
<ul class="simple">
<li><p>A tree view displaying <abbr title="Hardware Abstraction Layer">HAL</abbr> pins, parameters, signals, functions, etc. This view is located on the left side of the window, as seen in Figures <a class="reference internal" href="#fig-halshow-show"><span class="std std-numref">27</span></a> and <a class="reference internal" href="#fig-halshow-watch"><span class="std std-numref">28</span></a>.</p></li>
<li><p>A text input field for executing <abbr title="Hardware Abstraction Layer">HAL</abbr> commands, located at the bottom, as shown in Figures <a class="reference internal" href="#fig-halshow-show"><span class="std std-numref">27</span></a> and <a class="reference internal" href="#fig-halshow-watch"><span class="std std-numref">28</span></a>.</p></li>
<li><p>A “SHOW” tab where information about the selected element in the tree view is displayed, as shown in <a class="reference internal" href="#fig-halshow-show"><span class="std std-numref">Fig. 27</span></a>.</p></li>
<li><p>A “WATCH” tab where you can monitor and set values of <abbr title="Hardware Abstraction Layer">HAL</abbr> pins or parameters. Elements can be added here by clicking on them in the tree view, as shown in <a class="reference internal" href="#fig-halshow-watch"><span class="std std-numref">Fig. 28</span></a>.</p></li>
<li><p>A “SETTINGS” tab with various options such as refresh interval or display format of parameters.</p></li>
</ul>
<p>The <span class="menuselection">File</span> menu allows saving monitored elements from the “WATCH” tab to a file, as well as loading an existing list of elements to monitor from a file.</p>
<p>You can open the Halshow tool from the AXIS graphical interface by clicking on <span class="menuselection">Machine ‣ Show Hal Configuration</span>.</p>
<figure class="align-default" id="fig-halshow-show">
<a class="reference internal image-reference" href="../../_images/halshow_show.png"><img alt="../../_images/halshow_show.png" src="../../_images/halshow_show.png" style="width: 70%;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 27 </span><span class="caption-text">Halshow tool showing the “SHOW” tab.</span><a class="headerlink" href="#fig-halshow-show" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-default" id="fig-halshow-watch">
<a class="reference internal image-reference" href="../../_images/halshow_watch.png"><img alt="../../_images/halshow_watch.png" src="../../_images/halshow_watch.png" style="width: 70%;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 28 </span><span class="caption-text">Halshow tool showing the “WATCH” tab.</span><a class="headerlink" href="#fig-halshow-watch" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="halscope">
<h3><span class="section-number">3.8.3.3. </span>Halscope<a class="headerlink" href="#halscope" title="Link to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">halscope</span></code> is a graphical tool that provides an oscilloscope for <abbr title="Hardware Abstraction Layer">HAL</abbr>. It allows capturing and displaying the values of pins, signals, and parameters over a period of time. This tool is shown in <a class="reference internal" href="#fig-halscope"><span class="std std-numref">Fig. 29</span></a>. The <span class="menuselection">File</span> menu allows saving the current configuration or opening a previously saved configuration. When <code class="docutils literal notranslate"><span class="pre">halscope</span></code> is closed, the configuration is automatically saved to the <code class="docutils literal notranslate"><span class="pre">autosave.halscope</span></code> file.</p>
<figure class="align-default" id="fig-halscope">
<img alt="../../_images/hal_oscilloscope.png" src="../../_images/hal_oscilloscope.png" />
<figcaption>
<p><span class="caption-number">Fig. 29 </span><span class="caption-text">Halscope tool showing the values of <code class="docutils literal notranslate"><span class="pre">joint.0.motor-pos-cmd</span></code> (motor position commanded by LinuxCNC) and <code class="docutils literal notranslate"><span class="pre">joint.0.motor-pos-fb</span></code> (motor position read from the encoder) over time.</span><a class="headerlink" href="#fig-halscope" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>You can open the Halscope tool from the AXIS graphical interface by clicking on <span class="menuselection">Machine ‣ Hal scope</span>.</p>
</section>
<section id="halreport">
<h3><span class="section-number">3.8.3.4. </span>Halreport<a class="headerlink" href="#halreport" title="Link to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">halreport</span></code> is a command-line tool that generates a report on <abbr title="Hardware Abstraction Layer">HAL</abbr> connections. The command’s help output is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Usage:
    halreport -h | --help (this help)
or
    halreport [outfilename]
</pre></div>
</div>
<p>The generated report displays all signal connections and indicates potential issues. The information included in the report, among other things, is:</p>
<ul class="simple">
<li><p>System description and kernel version.</p></li>
<li><p>Signals and their connected output, input, and input/output pins.</p></li>
<li><p>Functions, threads, and <code class="docutils literal notranslate"><span class="pre">addf</span></code> commands corresponding to each pin.</p></li>
<li><p>Real names for pins that use aliases.</p></li>
<li><p>Signals without an output.</p></li>
<li><p>Signals without inputs.</p></li>
<li><p>Functions not added to threads.</p></li>
<li><p>Warnings about components marked as obsolete.</p></li>
</ul>
</section>
</section>
<section id="ladder-logic-programming">
<h2><span class="section-number">3.8.4. </span>Ladder Logic Programming<a class="headerlink" href="#ladder-logic-programming" title="Link to this heading">¶</a></h2>
<p>LinuxCNC includes the ClassicLadder component, a free implementation of a ladder interpreter published under the <a class="reference external" href="https://gnu.org/licenses/lgpl.html"><abbr title="GNU Lesser General Public License">LGPL</abbr></a>.</p>
<p>Ladder logic, or the ladder programming language, is a method for drawing electrical logic diagrams. Originally conceived to describe control systems using relays, this approach has become a widely used graphical language for programming <abbr title="Programmable Logic Controller">PLC</abbr> devices. It derives its name from the fact that programs in this language resemble ladders, with two vertical rails and a series of horizontal rungs between them.</p>
<p>To use ClassicLadder, you must load the <code class="docutils literal notranslate"><span class="pre">classicladder_rt</span></code> real-time module in <abbr title="Hardware Abstraction Layer">HAL</abbr> and add the <code class="docutils literal notranslate"><span class="pre">classicladder.0.refresh</span></code> function to the <code class="docutils literal notranslate"><span class="pre">servo-thread</span></code> thread using the following commands:</p>
<div class="highlight-hal notranslate"><div class="highlight"><pre><span></span><span class="k">loadrt</span> <span class="nv">classicladder_rt</span> <span class="k">addf</span> <span class="nv">classicladder.0.refresh</span> <span class="nv">servo-thread</span>
</pre></div>
</div>
<p>Once this is done, you can open the ClassicLadder graphical interface with the system command <code class="docutils literal notranslate"><span class="pre">classicladder</span></code>, or from the AXIS interface by clicking on <span class="menuselection">File ‣ Ladder Editor…</span>. The ClassicLadder graphical interface allows you to create ladder logic programs, as well as view the logical status of the different program components. This interface is composed of several windows, as shown in <a class="reference internal" href="#fig-classicladder"><span class="std std-numref">Fig. 30</span></a>.</p>
<figure class="align-default" id="fig-classicladder">
<img alt="../../_images/linuxcnc_ladder_editor.png" src="../../_images/linuxcnc_ladder_editor.png" />
<figcaption>
<p><span class="caption-number">Fig. 30 </span><span class="caption-text">ClassicLadder graphical interface.</span><a class="headerlink" href="#fig-classicladder" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>In our testbed setup, ladder logic has been used to program the operation of the LED indicator panel. The program created with ClassicLadder has been saved in the <code class="docutils literal notranslate"><span class="pre">myladder.clp</span></code> file. To use it in LinuxCNC, it can be loaded with the following <abbr title="Hardware Abstraction Layer">HAL</abbr> command:</p>
<div class="highlight-hal notranslate"><div class="highlight"><pre><span></span><span class="k">loadusr</span> <span class="nv">classicladder</span> <span class="nv">myladder.clp</span> <span class="o">-</span><span class="nv">nogui</span>
</pre></div>
</div>
<p>The LinuxCNC user manual <span id="id7">[<a class="reference internal" href="../../bibliography.html#id14" title="LinuxCNC Documentation. 2023. URL: https://linuxcnc.org/docs/.">lin23</a>]</span> includes a detailed guide to ClassicLadder. Another good introduction to ClassicLadder is “The Feral Engineer“‘s “Classicladder tutorials” series on YouTube: <a class="reference external" href="https://www.youtube.com/playlist?list=PLTYvfbjLClpfAfJSGhZUecgXFwVPY5e09">https://www.youtube.com/playlist?list=PLTYvfbjLClpfAfJSGhZUecgXFwVPY5e09</a>.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../../fdl-1.3.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">GNU Free Documentation License</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="07_linuxcnc_basic_usage.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title"><span class="section-number">3.7. </span>Basic LinuxCNC Usage</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2000–2022 LinuxCNC.org; 2025 Tomás Domínguez Bolaño, Valentín Barral Vales, Carlos José Escudero Cascón, and José Antonio García Naya (CITIC Research Center, University of A Coruña, Spain)
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            <div class="last-updated">
              Last updated on Aug 01, 2025</div>
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">3.8. LinuxCNC Configuration</a><ul>
<li><a class="reference internal" href="#ini-configuration">3.8.1. INI Configuration</a><ul>
<li><a class="reference internal" href="#ini-configuration-file-format">3.8.1.1. .ini Configuration File Format</a></li>
<li><a class="reference internal" href="#example-mesa-7i96s-7i77-xy-ini-configuration-file">3.8.1.2. Example: <code class="docutils literal notranslate"><span class="pre">mesa_7i96s_7i77_xy.ini</span></code> Configuration File</a></li>
</ul>
</li>
<li><a class="reference internal" href="#hal-configuration">3.8.2. <abbr title="Hardware Abstraction Layer">HAL</abbr> Configuration</a><ul>
<li><a class="reference internal" href="#basic-concepts">3.8.2.1. Basic Concepts</a></li>
<li><a class="reference internal" href="#interaction-with-hal-and-commands">3.8.2.2. Interaction with <abbr title="Hardware Abstraction Layer">HAL</abbr> and Commands</a></li>
<li><a class="reference internal" href="#hal-file-format">3.8.2.3. .hal File Format</a></li>
<li><a class="reference internal" href="#example-mesa-7i96s-7i77-xy-hal-configuration-file">3.8.2.4. Example: <code class="docutils literal notranslate"><span class="pre">mesa_7i96s_7i77_xy.hal</span></code> Configuration File</a></li>
</ul>
</li>
<li><a class="reference internal" href="#hal-tools">3.8.3. <abbr title="Hardware Abstraction Layer">HAL</abbr> Tools</a><ul>
<li><a class="reference internal" href="#halcmd">3.8.3.1. Halcmd</a></li>
<li><a class="reference internal" href="#halshow">3.8.3.2. Halshow</a></li>
<li><a class="reference internal" href="#halscope">3.8.3.3. Halscope</a></li>
<li><a class="reference internal" href="#halreport">3.8.3.4. Halreport</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ladder-logic-programming">3.8.4. Ladder Logic Programming</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    </body>
</html>